define(["underscore","backbone","marionette"],function(e,i,t){var s=i.Model.extend({defaults:{level:"info",timeout:4e3,dismissable:!0,header:null,message:""}}),o=t.ItemView.extend({className:"alert",template:"notification",ui:{dismiss:"[data-dismiss]",header:"h4",message:"div"},events:{"click [data-dismiss]":"dismiss",mouseover:"hold",mouseout:"release"},dismiss:function(){clearTimeout(this._dismissTimer),this.trigger("close")},hold:function(){this._startTime&&(clearTimeout(this._dismissTimer),this.$el.stop().show())},release:function(){if(this._startTime){var e=this._startTime+this.model.get("timeout"),i=Math.max(e-(new Date).getTime(),1e3),t=this;this._dismissTimer=setTimeout(function(){t.$el.fadeOut(function(){t.trigger("close")})},i)}},onRender:function(){this.$el.addClass("alert-"+this.model.get("level")),this.ui.header.toggle(!!this.model.get("header")),this.ui.dismiss.toggle(this.model.get("dismissable"));var e=this.model.get("timeout");e&&(this._startTime=(new Date).getTime(),this.release())}}),n=t.CollectionView.extend({className:"notifications",itemView:o,constructor:function(s){s=s||{},s.collection||(s.collection=new i.Collection),t.CollectionView.prototype.constructor.call(this,s),this.on("itemview:close",this.onNotificationClosed),e.bindAll(this,"notify","onNotificationClosed")},onNotificationClosed:function(e){this.collection.remove(e.model,{silent:!0})},notify:function(e){"string"==typeof e&&(e={message:e});var i={header:e.header,message:e.message};if(!this.collection.findWhere(i)){var t=new s(e);return this.collection.add(t),this.children.findByModel(t)}}});return{Notifications:n,Notification:o}});
//# sourceMappingURL=notify.js.map