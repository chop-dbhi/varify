define(["underscore","marionette","../core"],function(e,t,r){var i=t.ItemView.extend({className:"query-loader",template:"query/loader",ui:{loadingMessage:".loading-message",errorMessage:".error-message"},initialize:function(){if(this.data={},!(this.data.context=this.options.context))throw new Error("context model required");if(!(this.data.view=this.options.view))throw new Error("view model required");if(!(this.data.queries=this.options.queries))throw new Error("queries collection required");this.on("router:load",this.onRouterLoad),this.listenTo(this.data.queries,"sync",this.loadRequestedQuery)},onRouterLoad:function(e,t,r){this.requestedQueryId=parseInt(r)||null},loadRequestedQuery:function(){if(this.requestedQueryId){var e=this.data.queries.get(this.requestedQueryId);delete this.requestedQueryId,e?(this.data.view.save("json",e.get("view_json")),this.data.context.save("json",e.get("context_json"),{reset:!0}),r.router.navigate("results",{trigger:!0})):(this.ui.loadingMessage.hide(),this.ui.errorMessage.show())}}});return{QueryLoader:i}});
//# sourceMappingURL=loader.js.map