define(["underscore","marionette","loglevel","../core","../base","../welcome","../config","./form"],function(e,t,i,o,n,r,c,s){var a=n.ErrorView.extend({template:"concept/error"}),w=t.Layout.extend({className:"concept-workspace",template:"concept/workspace",itemView:s.ConceptForm,errorView:a,regions:{main:".main-region"},regionViews:{main:r.Welcome},initialize:function(){if(this.data={},!(this.data.concepts=this.options.concepts))throw new Error("concept collection required");if(!(this.data.context=this.options.context))throw new Error("context model required");this.listenTo(o,o.CONCEPT_FOCUS,this.showItem)},_ensureModel:function(e){return e instanceof o.models.Concept||(e=this.data.concepts.get(e)),e},showItem:function(t){var n=this._ensureModel(t);if(!n)return void i.debug("unknown workspace concept: "+(t.id||t));if(o.router.navigate("query",{trigger:!0}),!this.currentView.model||this.currentView.model.id!==n.id){var r={model:n,context:this.data.context},s=c.resolveFormOptions(n,"concepts");if(r=e.extend(r,s.options),s.module){var a=this;require([s.module],function(e){a.createView(e,r)},function(e){a.showErrorView(n),i.debug(e)})}else this.createView(s.view||this.itemView,r)}},createView:function(e,t){try{var i=new e(t);this.setView(i)}catch(n){if(this.showErrorView(t.model),o.config.get("debug"))throw n}},showErrorView:function(e){var t=new this.errorView({model:e});this.setView(t)},setView:function(e){this.currentView=e,this.main.show(e)},onRender:function(){var e=new this.regionViews.main({context:this.data.context});this.setView(e)}});return{ConceptWorkspace:w}});
//# sourceMappingURL=workspace.js.map