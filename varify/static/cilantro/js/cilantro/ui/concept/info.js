define(["jquery","underscore","marionette","../core"],function(i,e,t,s){var n=t.ItemView.extend({className:"concept-info",template:"concept/info",ui:{name:".name",category:".category",description:".description",descriptionText:".description .text",descriptionToggle:".description .toggle"},events:{"click .category-link":"onCategoryLinkClick","click @ui.descriptionToggle":"toggleDescription"},initialize:function(){e.bindAll(this,"renderDescriptionToggle"),0===this.model.fields.length&&this.listenToOnce(this.model.fields,"reset",function(){this.render()})},onCategoryLinkClick:function(e){var t=i(e.target);s.panels.concept.triggerSearch(t.text())},serializeData:function(){var i=this.model.toJSON();if(1===this.model.fields.length){var e=this.model.fields.at(0);i.description||(i.description=e.get("description")),i.unit||(i.unit=e.get("unit"))}return i},onRender:function(){e.defer(this.renderDescriptionToggle),i(window).on("resize",this.renderDescriptionToggle)},onClose:function(){i(window).off("resize",this.renderDescriptionToggle)},descriptionOverflows:function(){var i=this.ui.descriptionText.prop("scrollWidth"),e=this.ui.descriptionText.prop("offsetWidth");return i>e},renderDescriptionToggle:function(){var i=this.ui.description.hasClass("ellipsis");this.ui.description.addClass("ellipsis"),this.descriptionOverflows()?(this.ui.descriptionToggle.show(),this.ui.description.toggleClass("ellipsis",i)):(this.ui.descriptionToggle.hide(),this.ui.description.addClass("ellipsis"))},toggleDescription:function(){if(this.ui.description.hasClass("ellipsis")){if(!this.descriptionOverflows())return;this.ui.description.removeClass("ellipsis")}else this.ui.description.addClass("ellipsis")}});return{ConceptInfo:n}});
//# sourceMappingURL=info.js.map