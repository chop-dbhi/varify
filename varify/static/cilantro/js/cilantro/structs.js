define(["underscore","backbone","./models/base"],function(t,e,n){var o=e.Model.extend({defaults:{visible:!0},show:function(){this.set({visible:!0})},hide:function(){this.set({visible:!1})}}),s=e.Collection.extend({model:o}),i=e.Model.extend({constructor:function(t,n,s){n instanceof o||(n=new o(n)),this.index=n,e.Model.prototype.constructor.call(this,t,s)},size:function(){return 1},width:function(){return 1}}),r=e.Collection.extend({constructor:function(n,o,s){this.indexes=o;var r=this;this.model=function(e,n){var o=r.indexes.at(t.keys(r._byId).length);i.prototype.constructor.call(this,{value:e},o,n)},this.model.prototype=i.prototype,e.Collection.prototype.constructor.call(this,n,s)}}),c=e.Model.extend({constructor:function(n,o,i){var c;i||(i={}),o instanceof s||(o=new s(o)),this.indexes=o,t.isArray(n)?(c=n,n=null):i.parse=!0,this.data=new r(c,o),e.Model.prototype.constructor.call(this,n,i)},parse:function(t,e){return this.data.reset(t.values,e),delete t.values,t},isColumn:function(){return 1===this.width()},isRow:function(){return!this.isColumn()},size:function(){return this.isColumn()?this.data.length:1},width:function(){return this.indexes.length}}),l=e.Collection.extend({constructor:function(t,n,o){this.indexes=n;var s=this;this.model=function(t,e){c.prototype.constructor.call(this,t,s.indexes,e)},this.model.prototype=c.prototype,e.Collection.prototype.constructor.call(this,t,o)}}),u=n.Model.extend({constructor:function(e,o,i){var r;i||(i={}),o instanceof s||(o=new s(o)),this.indexes=o,t.isArray(e)?(r=e,e=null):i.parse=!0,this.series=new l(r,o),n.Model.prototype.constructor.call(this,e,i)},parse:function(t,e){return n.Model.prototype.parse.call(this,t,e),this.indexes.reset(t.keys,e),this.series.reset(t.objects,e),delete t.keys,delete t.objects,t},size:function(){return this.series.length},width:function(){return this.indexes.length},column:function(t){var e=this.series.map(function(e){return e.data.at(t)});return new c(e,this.indexes.at(t))}}),d=n.Collection.extend({model:u,constructor:function(t,e){this.indexes=new s,this.on("reset",function(t){var e=t.models[0];return e?this.indexes.reset(e.indexes.models):void 0}),this.on("add",function(t,e){return 1===e.length?this.indexes.reset(t.indexes.models):void 0}),n.Collection.prototype.constructor.call(this,t,e)}});return{Datum:i,Frame:u,FrameArray:d,Index:o,Indexes:s,Series:c}});
//# sourceMappingURL=structs.js.map