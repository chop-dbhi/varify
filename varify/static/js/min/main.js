require({config:{tpl:{variable:"data"}},shim:{bootstrap:["jquery"],marionette:{deps:["backbone"],exports:"Marionette"},highcharts:{deps:["jquery"],exports:"Highcharts"}}},["jquery","underscore","cilantro","varify/ui","varify/models","varify/csrf"],function(e,t,n,r,i){var s=2,o=111;n.config.set("varify.sample.concept",s),n.config.set("varify.sample.field",o);var u={url:n.config.get("url"),credentials:n.config.get("credentials")},a=function(){var e={view:{columns:[s]}},t;return n.session&&(t=n.session.data.views.session.get("json"))&&(e.view.ordering=t.ordering),e};n.config.set("fields.defaults.form.stats",!1),n.config.set("fields.types.number.form.chart",!1),n.config.set("fields.types.date.form.chart",!1),n.config.set("fields.types.time.form.chart",!1),n.config.set("fields.types.datetime.form.chart",!1),n.config.set("fields.instances.27.form.controls",["multiSelectionList"]),n.config.set("fields.instances.28.form.controls",["multiSelectionList"]),n.config.set("fields.instances.29.form.controls",["multiSelectionList"]),n.config.set("fields.instances.61.form.controls",["multiSelectionList"]),n.config.set("fields.instances.64.form.controls",["multiSelectionList"]),n.config.set("fields.instances.75.form.controls",["search"]),n.config.set("fields.instances.68.form.controls",["singleSelectionList"]),n.controls.set("Sift",r.SiftSelector),n.controls.set("PolyPhen",r.PolyPhenSelector),n.config.set("fields.instances.58.form.controls",["Sift"]),n.config.set("fields.instances.56.form.controls",["PolyPhen"]),n.config.set("fields.instances.110.form.controls",[{options:{isNullLabel:"Not In HGMD",isNotNullLabel:"In HGMD"},control:"nullSelector"}]);var f=function(e){t.findWhere(e,{concept:s})&&n.dialogs.sample.open()};n.on(n.CONCEPT_FOCUS,function(e){e===s&&n.dialogs.sample.open()}),n.config.set("filters.required",[{concept:s}]),n.on(n.CONTEXT_INVALID,f),n.on(n.CONTEXT_REQUIRED,f),n.ready(function(){n.sessions.open(u).then(function(){n.config.set("session.defaults.data.preview",a),this.data.samples=new i.Samples,this.data.samples.fetch({reset:!0}),this.data.contexts.once("sync",function(){this.session.validate()}),n.panels={concept:new n.ui.ConceptPanel({collection:this.data.concepts.queryable}),context:new n.ui.ContextPanel({model:this.data.contexts.session})},n.dialogs={exporter:new r.ExporterDialog({exporters:this.data.exporter}),columns:new n.ui.ConceptColumnsDialog({view:this.data.views.session,concepts:this.data.concepts.viewable}),query:new n.ui.EditQueryDialog({view:this.data.views.session,context:this.data.contexts.session,collection:this.data.queries}),deleteQuery:new n.ui.DeleteQueryDialog,resultDetails:new r.ResultDetailsModal,phenotype:new r.Phenotype({context:this.data.contexts.session}),sample:new r.SampleDialog({context:this.data.contexts.session,samples:this.data.samples}),variantSet:new r.VariantSetDialog};var t=[];e.each(n.panels,function(e,n){n.render(),t.push(n.el)}),e.each(n.dialogs,function(e,n){n.render(),t.push(n.el)});var s=e(n.config.get("main"));s.append.apply(s,t),n.workflows={workspace:new r.WorkspaceWorkflow({queries:this.data.queries,context:this.data.contexts.session,view:this.data.views.session,public_queries:this.data.public_queries,samples:this.data.samples}),query:new n.ui.QueryWorkflow({context:this.data.contexts.session,concepts:this.data.concepts.queryable}),results:new r.ResultsWorkflow({view:this.data.views.session,context:this.data.contexts.session,results:this.data.preview}),sampleload:new r.SampleLoader({context:this.data.contexts.session}),queryload:new n.ui.QueryLoader({queries:this.data.queries,context:this.data.contexts.session,view:this.data.views.session}),variantset:new r.VariantSetWorkflow};var o=[{id:"workspace",route:"workspace/",view:n.workflows.workspace},{id:"query",route:"query/",view:n.workflows.query},{id:"results",route:"results/",view:n.workflows.results},{id:"sample-load",route:"sample/:sample_id/",view:n.workflows.sampleload},{id:"query-load",route:"results/:query_id/",view:n.workflows.queryload},{id:"variant-set",route:"variant-sets/:variant_set_id",view:n.workflows.variantset}];this.start(o)})})})